<tool id="show-aligns" name="Show-Aligns" version="0.1.0">
    <requirements>
        <requirement type="package" version="4.0.0beta2">mummer4</requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
        show-aligns
            $sort
            $color
            -x $matrix
            -m $space
            '$delta'
            '$refID' '$qryID' > '$output'
        ]]>
    </command>
    <inputs>
        <param name="delta" type="data" format="txt" label="Match file from nucmer or promer" />
        <param name="refID" type="text" value="refID" label="Reference sequence ID (REQUIRED)" />
        <param name="qryID" type="text" value="qryID" label="Query sequence ID (REQUIRED)" />
        <param name="sort" type="select" label="Sort strategy" >
            <option value="-q">Sort alignments by the query start coordinate</option>
            <option value="-r">Sort alignments by the reference start coordinate</option>
        </param>
        <param name="color" type="boolean" argument="-c" truevalue="-c" falsevalue="" label="Colorize bases on output" />
        <param name="matrix" type="select" label="The alignment matrix type" >
            <option value="2">BLOSUM 62></option>
            <option value="1">BLOSUM 45</option>
            <option value="3">BLOSUM 80></option>
        </param>
        <param name="space" type="integer" argument="-m" value="10" label="Space between markers" />
    </inputs>
    <outputs>
        <data name="output" format="txt" from_work_dir="show-aligns.txt" label="show_aligns" />
    </outputs>
    <tests>
        <test>
            <param name="delta" ftype="txt" value="nucmer.txt" />
            <param name="matrix" value="2" />
            <param name="refID" value="NG_007476.1:4960-11439" />
            <param name="qryID" value="NC_000070.6:c41098183-41092724" />
            <output name="output" ftype="txt" compare="diff" value="show-aligns.txt" />
          </test>
    </tests>
    <help><![CDATA[
        This program parses the delta alignment output of nucmer and promer and displays all of the pairwise alignments from the two sequences specified on the command line.

        **Output:** each alignment header and footer describes the frame of the alignment in each sequence, and the start and finish (inclusive) of the alignment in each sequence.  At the beginning of each line of aligned sequence are two numbers, the top is the coordinate of the first reference base on that line and the bottom is the coordinate of the first query base on that line.  ALL coordinates reference the forward strand of the DNA sequence, even if it is a protein alignment.  A gap caused by an insertion or deletion is filled with a '.' character. Errors in a DNA alignment are marked with a '^' below the error.  Errors in an amino acid alignment are marked with a whitespace in the middle consensus line, while matches are marked with the consensus base and similarities are marked with a '+' in the consensus line.
    ]]></help>
    <citations>
        <citation type="bibtex">
            @misc{githubmummer,
            author = {Art Delcher, Stefan Kurtz, Adam Phillippy, Steven Salzberg},
            year = {2012},
            title = {mummer4},
            publisher = {GitHub},
            journal = {GitHub repository},
            url = {https://github.com/mummer4/mummer},
        }</citation>
    </citations>
</tool>